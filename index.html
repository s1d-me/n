<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>s1d - Empowering the Internet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;1,400&family=Comic+Neue:wght@700&family=LXGW+WenKai+Mono+TC:wght@700&display=swap" rel="stylesheet">
    
    <!-- D3.js library -->
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        mono: ['Space Mono', 'monospace'],
                        comic: ['"Comic Neue"', 'cursive'],
                        lxgw: ['"LXGW WenKai Mono TC"', 'monospace'],
                    },
                    keyframes: {
                        'pulse-glow': {
                            '0%, 100%': { textShadow: '0px 0px 30px rgba(255, 255, 255, 0.5), 0px 0px 12px rgba(255, 255, 255, 0.7)' },
                            '50%': { textShadow: '0px 0px 50px rgba(255, 255, 255, 0.7), 0px 0px 20px rgba(255, 255, 255, 0.9)' },
                        },
                        'border-rotation': {
                          '0%': { '--gradient-angle': '0deg' },
                          '100%': { '--gradient-angle': '360deg' }
                        },
                        'hologram-shine': {
                            '0%, 100%': { backgroundPosition: '-100% 0' },
                            '50%': { backgroundPosition: '200% 0' },
                        }
                    },
                    animation: {
                        'pulse-glow': 'pulse-glow 4s ease-in-out infinite',
                        'border-rotation': 'border-rotation 4s linear infinite',
                        'hologram-shine': 'hologram-shine 8s linear infinite',
                    }
                }
            }
        }
    </script>
    
    <style>
        /* --- CSS Property for Animation --- */
        @property --gradient-angle { syntax: "<angle>"; initial-value: 0deg; inherits: false; }

        /* --- Global & Layout --- */
        body::before { 
            content: ''; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            /* Optimized: Replaced Base64 PNG with a more performant and scalable CSS gradient */
            background-image: radial-gradient(rgba(255, 255, 255, 0.04) 1px, transparent 1px);
            background-size: 16px 16px;
            pointer-events: none; z-index: -1; 
        }
        ::-webkit-scrollbar { width: 8px; } 
        ::-webkit-scrollbar-track { background: rgba(10, 10, 10, 0.5); } 
        ::-webkit-scrollbar-thumb { background-color: #3f3f46; border-radius: 4px; border: 2px solid transparent; background-clip: content-box; } 
        ::-webkit-scrollbar-thumb:hover { background-color: #52525b; }
        aside { overflow-x: hidden; }

        /* --- Animated Panels --- */
        @keyframes glow-rotation { 0% { background-position: 50% 0%; } 12.5% { background-position: 100% 0%; } 25% { background-position: 100% 50%; } 37.5% { background-position: 100% 100%; } 50% { background-position: 50% 100%; } 62.5% { background-position: 0% 100%; } 75% { background-position: 0% 50%; } 87.5% { background-position: 0% 0%; } 100% { background-position: 50% 0%; } }
        .panel.animated-border { border-image-slice: 1; border-image-source: conic-gradient(from var(--gradient-angle), transparent 50%, var(--border-color, #fff), transparent); }
        .panel::before { content: ''; position: absolute; inset: 0; z-index: -1; background-size: 200% 200%; animation: glow-rotation 6s linear infinite; opacity: 0.3; }
        .panel-blue { --border-color: rgba(59, 130, 246, 1); } .panel-blue::before { background-image: radial-gradient(circle, rgba(59, 130, 246, 0.6) 0%, transparent 50%); }
        .panel-red { --border-color: rgba(239, 68, 68, 1); } .panel-red::before { background-image: radial-gradient(circle, rgba(239, 68, 68, 0.6) 0%, transparent 50%); }
        .panel-lime { --border-color: rgba(132, 204, 22, 1); } .panel-lime::before { background-image: radial-gradient(circle, rgba(132, 204, 22, 0.6) 0%, transparent 50%); }
        
        /* Improved: Smoother transitions for panel active state */
        .panel .panel-main-content { transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out; }
        .panel .panel-hover-content { transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out; }

        .panel.panel-active .panel-hover-content, .group:hover .panel-hover-content { opacity: 1; transform: scale(1); pointer-events: auto; }
        .panel.panel-active .panel-main-content, .group:hover .panel-main-content { opacity: 0; transform: scale(0.95); pointer-events: none; }
        /* Hide hover effect on desktop when panel is active from a click */
        @media (hover: hover) and (min-width: 1024px) { 
            .panel.panel-active .panel-hover-content { opacity: 0; transform: scale(0.9); pointer-events: none; } 
            .panel.panel-active .panel-main-content { opacity: 1; transform: scale(1); pointer-events: auto; } 
        }

        /* --- Passport Card --- */
        .passport-card {
            position: relative; border: 1px solid #3f3f46; background-color: #18181b;
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.3), 0 8px 10px -6px rgba(0,0,0,0.4);
            background-image: 
                radial-gradient(circle at 1px 1px, rgba(63, 63, 70, 0.4) 1px, transparent 0),
                repeating-linear-gradient(to right, rgba(63, 63, 70, 0.15) 0, rgba(63, 63, 70, 0.15) 1px, transparent 1px, transparent 20px),
                repeating-linear-gradient(to bottom, rgba(63, 63, 70, 0.15) 0, rgba(63, 63, 70, 0.15) 1px, transparent 1px, transparent 20px);
            background-size: 10px 10px, 100% 100%, 100% 100%;
            transition: border-color 0.3s ease; overflow: hidden;
        }
        .passport-card:hover { border-color: #60a5fa; }
        .passport-card::before, .passport-card::after { content: ''; position: absolute; width: 1rem; height: 1rem; border-color: #52525b; transition: border-color 0.3s ease; }
        .passport-card::before { top: -1px; left: -1px; border-top: 2px solid; border-left: 2px solid; z-index: 10; }
        .passport-card::after { bottom: -1px; right: -1px; border-bottom: 2px solid; border-right: 2px solid; z-index: 10; }
        .passport-card:hover::before, .passport-card:hover::after { border-color: #60a5fa; }
        /* Improved: Added inset shadow for depth */
        .passport-photo-box { box-shadow: 0 0 15px rgba(59, 130, 246, 0.3), inset 0 0 10px rgba(59, 130, 246, 0.2); }
        .passport-watermark { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-30deg); font-size: 6rem; font-weight: bold; color: rgba(161, 161, 170, 0.05); pointer-events: none; z-index: 0; font-family: 'Space Mono', monospace; }
        .passport-hologram { position: absolute; bottom: 40px; right: 15px; width: 50px; height: 50px; background-image: linear-gradient(110deg, transparent 25%, rgba(255, 255, 255, 0.2), transparent 50%); background-size: 300% 100%; opacity: 0.7; border-radius: 50%; z-index: 1; animation: hologram-shine 8s linear infinite; -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2h10a2 2 0 002-2v-1a2 2 0 012-2h1.945M7.707 4.293l.94-1.591a.5.5 0 01.894 0l.94 1.591M12 21a9 9 0 100-18 9 9 0 000 18z" /></svg>'); mask-size: contain; mask-repeat: no-repeat; mask-position: center; }
        .digital-stamp { font-family: 'Space Mono', monospace; font-weight: bold; color: rgba(59, 130, 246, 0.6); border: 2px solid rgba(59, 130, 246, 0.6); padding: 2px 8px; border-radius: 4px; transform: rotate(-10deg) translateY(5px); font-size: 12px; }
        .fake-barcode { width: 64px; height: 20px; background: repeating-linear-gradient(to right, #e5e7eb, #e5e7eb 2px, transparent 2px, transparent 4px, #e5e7eb 4px, #e5e7eb 5px, transparent 5px, transparent 8px, #e5e7eb 8px, #e5e7eb 10px, transparent 10px, transparent 11px, #e5e7eb 11px, #e5e7eb 12px, transparent 12px, transparent 15px); opacity: 0.8; }
        /* Improved: more realistic letter spacing for MRZ */
        .mrz-zone { font-family: 'Space Mono', monospace; letter-spacing: 3px; word-break: break-all; line-height: 1.4; position: relative; z-index: 2; }

        /* --- D3 Interactive Graph --- */
        .interactive-graph { width: 100%; aspect-ratio: 1.1; background-color: transparent; overflow: hidden; border-radius: 4px; }
        .graph-label { font-size: 11px; text-anchor: middle; pointer-events: none; font-family: 'Space Mono', monospace; fill: #e5e7eb; user-select: none; transition: opacity 0.3s; text-shadow: 0 0 5px rgba(0,0,0,0.9); }
        .leaf-label { opacity: 0; }
    </style>
</head>
<body class="bg-black text-gray-200 min-h-screen font-mono relative z-0">

    <div class="grid grid-cols-1 lg:grid-cols-[2fr_1fr]">
        <main class="relative p-4 sm:p-6 md:p-8 flex items-center justify-center lg:h-screen">
             <div class="hidden lg:flex absolute inset-0 z-20 items-center justify-center pointer-events-none">
                <h1 class="text-white font-bold animate-pulse-glow" style="font-size: clamp(6rem, 18vw, 14rem); line-height: 1;">s1d</h1>
            </div>
            <div class="z-10 w-full flex flex-col items-center">
                <div class="w-full max-w-5xl grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8 lg:gap-16 lg:mt-24">
                    <div class="group panel animated-border panel-blue animate-border-rotation relative flex items-center justify-center p-2 h-44 sm:h-56 lg:h-72 border-2 border-transparent text-zinc-600 transition-transform duration-500 ease-in-out hover:scale-[1.03] overflow-hidden cursor-pointer">
                        <div class="panel-main-content text-center">
                            <h2 class="font-lxgw font-bold text-4xl sm:text-5xl md:text-6xl">[<span class="text-blue-500">about</span>]</h2>
                        </div>
                        <div class="panel-hover-content absolute inset-0 grid grid-cols-2 grid-rows-2 opacity-0 scale-90 pointer-events-none">
                            <a href="#" class="flex items-center justify-center no-underline text-blue-500 border border-blue-500/50 bg-[rgba(10,10,10,0.2)] backdrop-blur-sm transition-colors duration-200 text-2xl font-comic hover:bg-blue-500/30 focus-visible:bg-blue-500/30 outline-none"><span class="relative z-20">what</span></a>
                            <a href="#" class="flex items-center justify-center no-underline text-blue-500 border border-blue-500/50 bg-[rgba(10,10,10,0.2)] backdrop-blur-sm transition-colors duration-200 text-2xl font-comic hover:bg-blue-500/30 focus-visible:bg-blue-500/30 outline-none"><span class="relative z-20">why</span></a>
                            <a href="#" class="flex items-center justify-center no-underline text-blue-500 border border-blue-500/50 bg-[rgba(10,10,10,0.2)] backdrop-blur-sm transition-colors duration-200 text-2xl font-comic hover:bg-blue-500/30 focus-visible:bg-blue-500/30 outline-none"><span class="relative z-20">how</span></a>
                            <a href="#" class="flex items-center justify-center no-underline text-blue-500 border border-blue-500/50 bg-[rgba(10,10,10,0.2)] backdrop-blur-sm transition-colors duration-200 text-2xl font-comic hover:bg-blue-500/30 focus-visible:bg-blue-500/30 outline-none"><span class="relative z-20">me</span></a>
                        </div>
                    </div>
                    <div class="group panel animated-border panel-red animate-border-rotation relative flex items-center justify-center p-2 h-44 sm:h-56 lg:h-72 border-2 border-transparent text-zinc-600 transition-transform duration-500 ease-in-out hover:scale-[1.03] overflow-hidden cursor-pointer">
                         <div class="panel-main-content text-center">
                            <h2 class="font-lxgw font-bold text-4xl sm:text-5xl md:text-6xl">[<span class="text-red-500">panel</span>]</h2>
                        </div>
                        <div class="panel-hover-content absolute inset-0 grid grid-cols-2 grid-rows-2 opacity-0 scale-90 pointer-events-none">
                            <a href="#" class="flex items-center justify-center no-underline text-red-500 border border-red-500/50 bg-[rgba(10,10,10,0.2)] backdrop-blur-sm transition-colors duration-200 text-2xl font-comic hover:bg-red-500/30 focus-visible:bg-red-500/30 outline-none"><span class="relative z-20">shortn</span></a>
                            <a href="#" class="flex items-center justify-center no-underline text-red-500 border border-red-500/50 bg-[rgba(10,10,10,0.2)] backdrop-blur-sm transition-colors duration-200 text-2xl font-comic hover:bg-red-500/30 focus-visible:bg-red-500/30 outline-none"><span class="relative z-20">paste</span></a>
                            <a href="#" class="flex items-center justify-center no-underline text-red-500 border border-red-500/50 bg-[rgba(10,10,10,0.2)] backdrop-blur-sm transition-colors duration-200 text-2xl font-comic hover:bg-red-500/30 focus-visible:bg-red-500/30 outline-none"><span class="relative z-20">image</span></a>
                            <a href="#" class="flex items-center justify-center no-underline text-red-500 border border-red-500/50 bg-[rgba(10,10,10,0.2)] backdrop-blur-sm transition-colors duration-200 text-2xl font-comic hover:bg-red-500/30 focus-visible:bg-red-500/30 outline-none"><span class="relative z-20">misc</span></a>
                        </div>
                    </div>
                    <div class="lg:h-72 flex flex-col items-center justify-center space-y-4 p-6 text-center order-first lg:order-none lg:border lg:border-zinc-700" style="background: linear-gradient(to bottom, rgba(10, 10, 10, 0.7), transparent);">
                        <h1 class="lg:hidden text-white font-bold animate-pulse-glow text-8xl leading-none mb-4">s1d</h1>
                        <p class="text-xl md:text-2xl italic">play-ground of the <span class="underline">internet</span></p>
                        <p class="text-lg md:text-xl">one thing at a time</p>
                        <button class="mt-4 px-10 py-3 text-white border-2 border-white transition-all duration-300 hover:bg-white hover:text-black hover:scale-105 focus:outline-none focus-visible:bg-white focus-visible:text-black">start</button>
                    </div>
                    <div class="group panel animated-border panel-lime animate-border-rotation relative flex items-center justify-center p-2 h-44 sm:h-56 lg:h-72 border-2 border-transparent text-zinc-600 transition-transform duration-500 ease-in-out hover:scale-[1.03] overflow-hidden cursor-pointer">
                        <div class="panel-main-content text-center">
                            <h2 class="font-lxgw font-bold text-4xl sm:text-5xl md:text-6xl">[<span class="text-lime-500">contact</span>]</h2>
                        </div>
                        <div class="panel-hover-content absolute inset-0 grid grid-cols-2 grid-rows-2 opacity-0 scale-90 pointer-events-none">
                            <a href="#" class="flex items-center justify-center no-underline text-lime-500 border border-lime-500/50 bg-[rgba(10,10,10,0.2)] backdrop-blur-sm transition-colors duration-200 text-2xl font-comic hover:bg-lime-500/30 focus-visible:bg-lime-500/30 outline-none"><span class="relative z-20">us</span></a>
                            <a href="#" class="flex items-center justify-center no-underline text-lime-500 border border-lime-500/50 bg-[rgba(10,10,10,0.2)] backdrop-blur-sm transition-colors duration-200 text-2xl font-comic hover:bg-lime-500/30 focus-visible:bg-lime-500/30 outline-none"><span class="relative z-20">him</span></a>
                            <a href="#" class="flex items-center justify-center no-underline text-lime-500 border border-lime-500/50 bg-[rgba(10,10,10,0.2)] backdrop-blur-sm transition-colors duration-200 text-2xl font-comic hover:bg-lime-500/30 focus-visible:bg-lime-500/30 outline-none"><span class="relative z-20">legal</span></a>
                            <a href="#" class="flex items-center justify-center no-underline text-lime-500 border border-lime-500/50 bg-[rgba(10,10,10,0.2)] backdrop-blur-sm transition-colors duration-200 text-2xl font-comic hover:bg-lime-500/30 focus-visible:bg-lime-500/30 outline-none"><span class="relative z-20">help</span></a>
                        </div>
                    </div>
                </div>
                <div class="mt-12 flex flex-wrap justify-center gap-4">
                    <a href="#" class="text-zinc-400 uppercase tracking-wider text-sm p-2 no-underline border-b border-transparent transition-colors duration-200 ease-in-out hover:text-white hover:border-white">Privacy Policy</a>
                    <a href="#" class="text-zinc-400 uppercase tracking-wider text-sm p-2 no-underline border-b border-transparent transition-colors duration-200 ease-in-out hover:text-white hover:border-white">Terms of Service</a>
                    <a href="#" class="text-zinc-400 uppercase tracking-wider text-sm p-2 no-underline border-b border-transparent transition-colors duration-200 ease-in-out hover:text-white hover:border-white">API Docs</a>
                    <a href="#" class="text-zinc-400 uppercase tracking-wider text-sm p-2 no-underline border-b border-transparent transition-colors duration-200 ease-in-out hover:text-white hover:border-white">Donate</a>
                </div>
            </div>
        </main>

        <aside class="bg-gradient-to-br from-zinc-900 via-[#18181b] to-[#18181b] p-6 md:p-8 border-l border-zinc-800 lg:sticky lg:top-0 lg:h-screen lg:overflow-y-auto">
            <div class="mb-8 pb-4 border-b border-zinc-800">
                <h2 class="font-mono font-bold text-3xl text-white tracking-[0.2em]">s1d-ebar</h2>
                <p class="text-xs text-zinc-400 mt-1">Real-time Playground & Stats</p>
            </div>
            
            <!-- Improved: Sidebar sections are now self-contained cards for better organization -->
            <div class="flex flex-col space-y-8">
                
                <div class="bg-zinc-900/50 border border-zinc-800 rounded-lg p-4">
                    <p class="text-sm text-gray-300 leading-relaxed">s1d is essentially a link shortener on steroids. We track user analytics on cookie approval (see ToS). APIs are available for business purposes - contact us for more info.</p>
                </div>

                <!-- PASSPORT CARD -->
                <div class="passport-card p-4 relative">
                    <div class="passport-watermark">s1d</div>
                    <div class="passport-hologram animate-hologram-shine"></div>
                    
                    <div class="flex justify-between items-center pb-2 border-b border-zinc-700/50 relative z-10">
                        <h3 class="font-bold text-white text-lg tracking-wider">NETIZEN PASSPORT</h3>
                        <p class="text-xs text-lime-400">Status: <span class="font-bold">ACTIVE</span></p>
                    </div>

                    <div class="flex space-x-3 mt-3 relative z-10">
                        <div class="flex flex-col items-center space-y-2 shrink-0">
                            <div class="passport-photo-box w-16 h-20 bg-blue-500/20 border-2 border-blue-400 flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                            </div>
                            <div class="fake-barcode"></div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-x-3 gap-y-1 text-xs flex-grow">
                            <div><span class="text-zinc-500 block text-[10px] uppercase">Surname</span><span class="font-semibold text-zinc-200">User</span></div>
                            <div><span class="text-zinc-500 block text-[10px] uppercase">Given Name</span><span class="font-semibold text-zinc-200">Guest</span></div>
                            <div class="col-span-2"><span class="text-zinc-500 block text-[10px] uppercase">Passport ID</span><span id="passport-id" class="text-blue-300 font-semibold tracking-wider text-[11px] break-all">...</span></div>
                            <div><span class="text-zinc-500 block text-[10px] uppercase">Issued</span><span id="passport-issued" class="text-zinc-300">...</span></div>
                            <div><span class="text-zinc-500 block text-[10px] uppercase">Expires</span><span id="passport-expires" class="text-zinc-300">...</span></div>
                            <div class="col-span-2"><span class="text-zinc-500 block text-[10px] uppercase">Authority</span><span class="text-zinc-300">s1d.me/SYS_ADMIN</span></div>
                        </div>
                    </div>

                    <div class="mt-2 flex justify-between items-end relative z-10">
                        <div>
                            <span class="text-zinc-500 block text-[10px] uppercase">Signature</span>
                            <p class="font-comic text-zinc-200 text-lg -mt-1">Guest</p>
                        </div>
                        <div class="digital-stamp">VALIDATED</div>
                    </div>
                    
                    <div class="mrz-zone text-zinc-400 text-[10px] leading-tight mt-3 pt-2 border-t border-zinc-700/50">
                        <p id="mrz-line1">P<GUEST<<USER<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<</p>
                        <p id="mrz-line2">IDGUESTUSER-SESSION-ID<<<<<<<<<<<<<7</p>
                    </div>
                </div>
                
                <!-- SITE GRAPH -->
                <div class="bg-zinc-900/50 border border-zinc-800 rounded-lg p-4">
                    <h3 class="text-sm font-bold text-white uppercase tracking-wider mb-3">Site Graph</h3>
                    <div id="interactive-graph-container" class="relative">
                        <div class="interactive-graph" id="interactive-graph"></div>
                        <div class="absolute top-0 right-0 flex flex-col space-y-1 z-10">
                            <button id="zoom-in" class="w-7 h-7 bg-zinc-700/80 hover:bg-zinc-600 rounded-md text-zinc-200 text-lg leading-none transition-colors focus-visible:ring-2 focus-visible:ring-blue-500 outline-none">+</button>
                            <button id="zoom-out" class="w-7 h-7 bg-zinc-700/80 hover:bg-zinc-600 rounded-md text-zinc-200 text-lg leading-none transition-colors focus-visible:ring-2 focus-visible:ring-blue-500 outline-none">-</button>
                        </div>
                    </div>
                </div>

                <!-- SERVER STATUS -->
                <div class="bg-zinc-900/50 border border-zinc-800 rounded-lg p-4">
                    <h3 class="text-sm font-bold text-white uppercase tracking-wider mb-3">Server Status</h3>
                    <div class="bg-zinc-900/50 p-3 rounded-md">
                        <div class="flex gap-px" id="server-status-bar"></div>
                        <div class="flex justify-between text-[10px] text-zinc-500 mt-1">
                            <span>90 days ago</span>
                            <span>Today</span>
                        </div>
                    </div>
                </div>
                
                <!-- SERVER LOAD -->
                <div class="bg-zinc-900/50 border border-zinc-800 rounded-lg p-4">
                    <h3 class="text-sm font-bold text-white uppercase tracking-wider mb-3">Server Load</h3>
                    <div class="bg-zinc-900/70 p-4 rounded-md">
                        <div id="server-load-graph-container" class="w-full h-40"></div>
                        <div id="server-load-legend" class="flex flex-wrap gap-x-4 gap-y-1 justify-center text-xs mt-3"></div>
                    </div>
                </div>

                <!-- STATS -->
                <div class="bg-zinc-900/50 border border-zinc-800 rounded-lg p-4">
                    <h3 class="text-sm font-bold text-white uppercase tracking-wider mb-3">Random Stats</h3>
                    <div class="grid grid-cols-2 gap-4 text-center">
                        <div class="bg-zinc-900/50 p-3 rounded-md"><p class="text-xs text-zinc-400">Links Active</p><p id="stat-links" class="text-xl text-white font-bold">14,831</p></div>
                        <div class="bg-zinc-900/50 p-3 rounded-md"><p class="text-xs text-zinc-400">Total Clicks</p><p id="stat-clicks" class="text-xl text-white font-bold">983,102</p></div>
                        <div class="bg-zinc-900/50 p-3 rounded-md"><p class="text-xs text-zinc-400">Users Online</p><p id="stat-users" class="text-xl text-white font-bold">2,415</p></div>
                        <div class="bg-zinc-900/50 p-3 rounded-md"><p class="text-xs text-zinc-400">API Calls</p><p id="stat-api" class="text-xl text-white font-bold">1,732,842</p></div>
                    </div>
                </div>
                
                <!-- BULLETIN -->
                <div class="bg-zinc-900/50 border border-zinc-800 rounded-lg p-4">
                    <h3 class="text-sm font-bold text-white uppercase tracking-wider mb-3">Playground Bulletin</h3>
                    <div class="bg-zinc-900/50 p-4 space-y-3 text-xs text-zinc-300 rounded-md">
                        <p><span class="text-lime-400">[Update]</span> New API endpoints for enterprise users now live.</p>
                        <p><span class="text-yellow-400">[Notice]</span> Scheduled maintenance on Dec 25th, 02:00 UTC.</p>
                        <p><span class="text-blue-400">[Info]</span> Welcome to the new s1d playground! Explore and have fun.</p>
                    </div>
                </div>
                
                <!-- USER INFO -->
                <div class="bg-zinc-900/50 border border-zinc-800 rounded-lg p-4">
                    <h3 class="text-xs italic text-gray-400 mb-3">i thought it would be funny to have more information about you here</h3>
                    <div id="user-info-container" class="text-xs break-words space-y-2 pt-3 border-t border-gray-700 text-gray-400">
                        <p>Gathering session data...</p>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- INTERACTIVE PANEL LOGIC ---
            // Handles the click-to-open behavior for the main content panels.
            const panels = document.querySelectorAll('.panel'); 
            const closeAllPanels = () => panels.forEach(p => p.classList.remove('panel-active'));
            
            panels.forEach(panel => {
                panel.addEventListener('click', (e) => {
                    // Don't interfere with clicks on the actual links inside
                    if (e.target.closest('a')) return;
                    
                    const wasActive = panel.classList.contains('panel-active');
                    closeAllPanels(); 
                    if (!wasActive) {
                        panel.classList.add('panel-active');
                    }
                    e.stopPropagation();
                });
            });
            
            // Close panels if clicking anywhere else on the document
            document.addEventListener('click', (e) => { 
                if (!e.target.closest('.panel')) {
                    closeAllPanels();
                } 
            });

            // --- USER & PASSPORT INFO ---
            // Fetches user data and populates the Passport and User Info cards.
            const displayUserInfo = () => {
                const container = document.getElementById("user-info-container");
                const passportIdEl = document.getElementById("passport-id");
                const passportIssuedEl = document.getElementById("passport-issued");
                const passportExpiresEl = document.getElementById("passport-expires");
                const mrzLine1El = document.getElementById('mrz-line1');
                const mrzLine2El = document.getElementById('mrz-line2');
                
                if (!container) return;
                container.innerHTML = '';

                const addInfo = (label, value) => {
                    const p = document.createElement('p');
                    p.innerHTML = `<span class="text-zinc-500">${label}:</span> <span class="text-zinc-300">${value || 'N/A'}</span>`;
                    container.appendChild(p);
                };
                
                const padString = (str, len) => (str + '<'.repeat(len)).slice(0, len);

                const generateMRZ = (id) => {
                    // Generates fake Machine Readable Zone text for the passport
                    // P< - Passport, NET - Fictional "Netizen" country code
                    // GUEST<<USER - Surname and Given Name, padded with '<'
                    const line1 = padString('P<NET<GUEST<<USER', 44);
                    
                    // ID + DOB + Gender + Expiry + Check Digits
                    const idPart = padString(id.replace(/[\.\-]/g, '').slice(0, 15), 23);
                    const dob = '850101'; // Fake DOB YYMMDD
                    const expiry = new Date(new Date().setFullYear(new Date().getFullYear() + 1)).toISOString().slice(2, 10).replace(/-/g, '').slice(0, 6); // YYMMDD
                    const line2 = padString(`${idPart}<${dob}8M${expiry}3<<<<<<<<<<<`, 43) + '8';

                    if (mrzLine1El) mrzLine1El.textContent = line1;
                    if (mrzLine2El) mrzLine2El.textContent = line2;
                }

                addInfo('Agent', navigator.userAgent);
                addInfo('Platform', navigator.platform);
                addInfo('Language', navigator.language);
                addInfo('Screen Res', `${screen.width}x${screen.height}`);
                addInfo('Timezone', Intl.DateTimeFormat().resolvedOptions().timeZone);
                
                fetch("https://api.ipify.org?format=json")
                    .then(res => res.json())
                    .then(data => {
                        addInfo('IPv4', data.ip);
                        if (passportIdEl) passportIdEl.textContent = data.ip.replaceAll('.', '-');
                        generateMRZ(data.ip);
                    })
                    .catch(() => {
                        addInfo('IPv4', 'Unavailable');
                        if (passportIdEl) passportIdEl.textContent = "REDACTED";
                        generateMRZ("REDACTED");
                    });
                
                fetch("https://api64.ipify.org?format=json")
                    .then(res => res.json())
                    .then(data => addInfo('IPv6', data.ip))
                    .catch(() => addInfo('IPv6', 'Unavailable'));
                
                if (passportIssuedEl) { 
                    passportIssuedEl.textContent = new Date().toLocaleDateString('en-CA'); 
                }
                if (passportExpiresEl) {
                    const expiryDate = new Date();
                    expiryDate.setMonth(expiryDate.getMonth() + 6); // Session expires in 6 months
                    passportExpiresEl.textContent = expiryDate.toLocaleDateString('en-CA');
                }
            };
            
            // --- SERVER STATUS BAR ---
            // Generates a random 90-day uptime status bar.
            const generateServerStatusBar = () => {
                const statusBar = document.getElementById("server-status-bar");
                if (!statusBar) return;

                statusBar.innerHTML = "";
                const colors = { operational: "bg-green-500", degraded: "bg-yellow-500", outage: "bg-red-500" };
                const tooltips = { operational: "All systems operational.", degraded: "Degraded performance.", outage: "Service outage." };
                
                for (let i = 0; i < 90; i++) {
                    const day = document.createElement("div");
                    day.className = "h-6 flex-1";
                    
                    let rand = Math.random();
                    let statusKey = rand > 0.98 ? 'outage' : (rand > 0.95 ? 'degraded' : 'operational');
                    
                    day.classList.add(colors[statusKey]);
                    day.title = `Day ${90 - i} ago: ${tooltips[statusKey]}`;
                    statusBar.appendChild(day);
                }
            };
            
            // --- SERVER LOAD GRAPH ---
            // Renders and periodically updates the stacked area chart for server load.
            const updateServerLoadGraph = () => {
                const container = document.getElementById('server-load-graph-container');
                const legendContainer = document.getElementById('server-load-legend');
                if (!container || !legendContainer) return;

                const width = 300, height = 120, numPoints = 30, maxTotalUsage = 400;
                const cores = [ 
                    { name: 'Core 1', color: 'rgba(59, 130, 246, 0.7)', peak: 80 }, 
                    { name: 'Core 2', color: 'rgba(239, 68, 68, 0.7)', peak: 60 }, 
                    { name: 'Core 3', color: 'rgba(16, 185, 129, 0.7)', peak: 120 } 
                ];

                const coreData = cores.map(core => Array.from({ length: numPoints }, () => Math.random() * core.peak));
                const stackedData = [];
                for (let i = 0; i < numPoints; i++) {
                    let cumulativeHeight = 0, point = [];
                    for (let j = 0; j < cores.length; j++) { 
                        cumulativeHeight += coreData[j][i]; 
                        point.push(cumulativeHeight); 
                    }
                    stackedData.push(point);
                }

                const pathStrings = cores.map((_, coreIndex) => `M 0,${height} L ${stackedData.map((point, i) => `${((i / (numPoints - 1)) * width).toFixed(2)},${(height - (point[coreIndex] / maxTotalUsage) * height).toFixed(2)}`).join(' L ')} L ${width},${height} Z`);
                
                let gridLines = '';
                for (let i = 0; i <= 4; i++) {
                    const y = height - (i * (height / 4));
                    gridLines += `<line x1="30" y1="${y}" x2="${width}" y2="${y}" stroke="#3f3f46" stroke-width="0.5"/><text x="0" y="${y+3}" fill="#a1a1aa" font-size="10">${i * 100}%</text>`;
                }
                
                container.innerHTML = `<svg viewBox="0 0 ${width} ${height}" preserveAspectRatio="none" class="w-full h-full"><g>${gridLines}</g>${cores.map((core, i) => `<path d="${pathStrings[cores.length - 1 - i]}" fill="${cores[cores.length - 1 - i].color}" />`).join('')}</svg>`;
                legendContainer.innerHTML = cores.map(core => `<div class="flex items-center space-x-2"><div class="w-3 h-3 rounded-sm" style="background-color: ${core.color};"></div><span>${core.name}</span></div>`).join('');
            };

            // --- RANDOM STATS UPDATER ---
            // Periodically increments the "Random Stats" values.
            const updateStats = () => {
                const increments = { 
                    "stat-links": 1, 
                    "stat-clicks": Math.floor(Math.random() * 20) + 5, 
                    "stat-users": (Math.random() > 0.5 ? 1 : -1) * Math.floor(5 * Math.random()), 
                    "stat-api": Math.floor(Math.random() * 40) + 10
                };
                for (const id in increments) {
                    const el = document.getElementById(id);
                    if (el) {
                        let currentVal = parseInt(el.textContent.replace(/,/g, ""), 10) + increments[id];
                        el.textContent = currentVal.toLocaleString("en-US");
                    }
                }
            };
            
            // --- D3 SITE GRAPH ---
            // Initializes the interactive D3.js force-directed graph.
            const createInteractiveGraph = () => {
                const graphElement = document.getElementById("interactive-graph");
                if (!graphElement) return;

                const graphData = {
                    nodes: [
                        { id: 's1d', title: 's1d', isHub: true, radius: 22, color: '#FBBF24', url: '#' },
                        { id: 'about', title: 'about', isHub: true, radius: 16, color: '#3B82F6', url: '#' },
                        { id: 'panel', title: 'panel', isHub: true, radius: 16, color: '#EF4444', url: '#' },
                        { id: 'contact', title: 'contact', isHub: true, radius: 16, color: '#84CC16', url: '#' },
                        ...['what', 'why', 'how', 'me'].map(n => ({ id: n, title: n, isHub: false, radius: 10, color: '#3B82F6', url: '#' })),
                        ...['shortn', 'paste', 'image', 'misc'].map(n => ({ id: n, title: n, isHub: false, radius: 10, color: '#EF4444', url: '#' })),
                        ...['us', 'him', 'legal', 'help'].map(n => ({ id: n, title: n, isHub: false, radius: 10, color: '#84CC16', url: '#' })),
                    ],
                    links: [
                        { source: 's1d', target: 'about' }, { source: 's1d', target: 'panel' }, { source: 's1d', target: 'contact' },
                        ...['what', 'why', 'how', 'me'].map(n => ({ source: 'about', target: n })),
                        ...['shortn', 'paste', 'image', 'misc'].map(n => ({ source: 'panel', target: n })),
                        ...['us', 'him', 'legal', 'help'].map(n => ({ source: 'contact', target: n })),
                    ]
                };

                let svg, g, simulation, zoom;

                const initGraph = () => {
                    const width = graphElement.clientWidth;
                    const height = graphElement.clientHeight;
                    graphElement.innerHTML = ''; 

                    svg = d3.select(graphElement).append("svg")
                        .attr("width", width).attr("height", height)
                        .attr("viewBox", `0 0 ${width} ${height}`);

                    g = svg.append("g");

                    zoom = d3.zoom().scaleExtent([0.4, 4]).on("zoom", (event) => {
                        g.attr("transform", event.transform);
                        updateLabelsVisibility(event.transform.k);
                    });
                    svg.call(zoom);

                    simulation = d3.forceSimulation(graphData.nodes)
                        .force("link", d3.forceLink(graphData.links).id(d => d.id).distance(d => d.source.isHub ? 80 : 45).strength(1))
                        .force("charge", d3.forceManyBody().strength(-300))
                        .force("center", d3.forceCenter(width / 2, height / 2).strength(0.8))
                        .force("collision", d3.forceCollide().radius(d => d.radius + 8));

                    const link = g.append("g").selectAll("line")
                        .data(graphData.links).enter().append("line")
                        .attr("stroke", "#4b5563").attr("stroke-opacity", 0.7);

                    const nodeGroup = g.append("g").selectAll("g")
                        .data(graphData.nodes).enter().append("g")
                        .style("cursor", "pointer")
                        .call(drag(simulation))
                        .on("click", (event, d) => { event.stopPropagation(); window.location.href = d.url; });

                    nodeGroup.append("circle")
                        .attr("r", d => d.radius)
                        .attr("fill", d => d.color)
                        .attr("stroke", d => d3.color(d.color).darker(0.7))
                        .attr("stroke-width", 2.5);

                    nodeGroup.append("text")
                        .attr("class", d => d.isHub ? "graph-label" : "graph-label leaf-label")
                        .attr("dy", "0.35em")
                        .text(d => d.title);
                    
                    updateLabelsVisibility(1);

                    simulation.on("tick", () => {
                        link.attr("x1", d => d.source.x).attr("y1", d => d.source.y)
                            .attr("x2", d => d.target.x).attr("y2", d => d.target.y);
                        nodeGroup.attr("transform", d => `translate(${d.x},${d.y})`);
                    });
                };

                const updateLabelsVisibility = (scale) => g.selectAll(".leaf-label").style("opacity", scale > 1.4 ? 1 : 0);

                const drag = (simulation) => {
                    function dragstarted(event, d) { if (!event.active) simulation.alphaTarget(0.3).restart(); d.fx = d.x; d.fy = d.y; }
                    function dragged(event, d) { d.fx = event.x; d.fy = event.y; }
                    function dragended(event, d) { if (!event.active) simulation.alphaTarget(0); d.fx = null; d.fy = null; }
                    return d3.drag().on("start", dragstarted).on("drag", dragged).on("end", dragended);
                }

                d3.select("#zoom-in").on("click", () => svg.transition().duration(250).call(zoom.scaleBy, 1.3));
                d3.select("#zoom-out").on("click", () => svg.transition().duration(250).call(zoom.scaleBy, 1 / 1.3));

                initGraph();
                window.addEventListener("resize", () => { // Debounce resize for performance
                    clearTimeout(window.resizeTimer);
                    window.resizeTimer = setTimeout(initGraph, 250);
                });
            };

            // --- INITIALIZATION ---
            // Call all setup functions and start timers.
            displayUserInfo();
            generateServerStatusBar();
            updateServerLoadGraph();
            updateStats();
            createInteractiveGraph();
            
            setInterval(updateStats, 1200);
            setInterval(updateServerLoadGraph, 5000);
        });
    </script>
</body>
</html>
